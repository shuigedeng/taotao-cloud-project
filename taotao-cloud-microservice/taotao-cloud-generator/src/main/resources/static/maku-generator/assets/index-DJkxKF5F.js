import{d as q,r as P,a as R,b as d,o as U,c as N,w as l,e,f as g,A as S,E as H,z as O,v as C,B as A}from"./index-BiRPmL5w.js";import{s as $,u as B}from"./index-D6a9aOBY.js";const z=_=>$.get("/gen/project/"+_),F=_=>_.id?$.put("/gen/project",_):$.post("/gen/project",_),K=_=>{location.href="./gen/project/download/"+_},E=q({__name:"add-or-update",emits:["refreshDataList"],setup(_,{expose:s,emit:j}){const v=j,a=P(!1),y=P(),u=R({id:"",projectName:"",projectCode:"",projectPackage:"",projectPath:""}),x=r=>{a.value=!0,u.id="",y.value&&y.value.resetFields(),r&&k(r)},k=r=>{z(r).then(o=>{Object.assign(u,o.data)})},f=P({projectName:[{required:!0,message:"必填项不能为空",trigger:"blur"}],projectCode:[{required:!0,message:"必填项不能为空",trigger:"blur"}],projectPackage:[{required:!0,message:"必填项不能为空",trigger:"blur"}],projectPath:[{required:!0,message:"必填项不能为空",trigger:"blur"}]}),t=()=>{y.value.validate(r=>{if(!r)return!1;F(u).then(()=>{H.success({message:"操作成功",duration:500,onClose:()=>{a.value=!1,v("refreshDataList")}})})})};return s({init:x}),(r,o)=>{const p=d("el-input"),m=d("el-form-item"),b=d("el-form"),w=d("el-button"),c=d("el-dialog");return U(),N(c,{modelValue:a.value,"onUpdate:modelValue":o[7]||(o[7]=i=>a.value=i),title:u.id?"修改":"新增","close-on-click-modal":!1},{footer:l(()=>[e(w,{onClick:o[5]||(o[5]=i=>a.value=!1)},{default:l(()=>[g("取消")]),_:1}),e(w,{type:"primary",onClick:o[6]||(o[6]=i=>t())},{default:l(()=>[g("确定")]),_:1})]),default:l(()=>[e(b,{ref_key:"dataFormRef",ref:y,model:u,rules:f.value,"label-width":"100px",onKeyup:o[4]||(o[4]=S(i=>t(),["enter"]))},{default:l(()=>[e(m,{label:"项目名",prop:"projectName"},{default:l(()=>[e(p,{modelValue:u.projectName,"onUpdate:modelValue":o[0]||(o[0]=i=>u.projectName=i),placeholder:"项目名"},null,8,["modelValue"])]),_:1}),e(m,{label:"项目标识",prop:"projectCode"},{default:l(()=>[e(p,{modelValue:u.projectCode,"onUpdate:modelValue":o[1]||(o[1]=i=>u.projectCode=i),placeholder:"项目标识"},null,8,["modelValue"])]),_:1}),e(m,{label:"项目包名",prop:"projectPackage"},{default:l(()=>[e(p,{modelValue:u.projectPackage,"onUpdate:modelValue":o[2]||(o[2]=i=>u.projectPackage=i),placeholder:"项目包名"},null,8,["modelValue"])]),_:1}),e(m,{label:"项目路径",prop:"projectPath"},{default:l(()=>[e(p,{modelValue:u.projectPath,"onUpdate:modelValue":o[3]||(o[3]=i=>u.projectPath=i),placeholder:"项目路径"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),M=q({__name:"download",setup(_,{expose:s}){const j=P(!1),v=P(),a=R({id:"",projectName:"",projectCode:"",projectPackage:"",projectPath:"",modifyProjectName:"",modifyProjectCode:"",modifyProjectPackage:"",exclusions:"",modifySuffix:""}),y=f=>{j.value=!0,a.id="",v.value&&v.value.resetFields(),f&&u(f)},u=f=>{z(f).then(t=>{Object.assign(a,t.data)})},x=P({modifyProjectName:[{required:!0,message:"必填项不能为空",trigger:"blur"}],modifyProjectCode:[{required:!0,message:"必填项不能为空",trigger:"blur"}],modifyProjectPackage:[{required:!0,message:"必填项不能为空",trigger:"blur"}],exclusions:[{required:!0,message:"必填项不能为空",trigger:"blur"}],modifySuffix:[{required:!0,message:"必填项不能为空",trigger:"blur"}]}),k=()=>{v.value.validate(async f=>{if(!f)return!1;await F(a),K(a.id),j.value=!1})};return s({init:y}),(f,t)=>{const r=d("el-input"),o=d("el-form-item"),p=d("el-col"),m=d("el-row"),b=d("el-divider"),w=d("el-form"),c=d("el-button"),i=d("el-dialog");return U(),N(i,{modelValue:j.value,"onUpdate:modelValue":t[12]||(t[12]=n=>j.value=n),title:"源码下载","close-on-click-modal":!1},{footer:l(()=>[e(c,{onClick:t[10]||(t[10]=n=>j.value=!1)},{default:l(()=>[g("取消")]),_:1}),e(c,{type:"primary",onClick:t[11]||(t[11]=n=>k())},{default:l(()=>[g("下载")]),_:1})]),default:l(()=>[e(w,{ref_key:"dataFormRef",ref:v,model:a,rules:x.value,"label-width":"100px",onKeyup:t[9]||(t[9]=S(n=>k(),["enter"]))},{default:l(()=>[e(m,null,{default:l(()=>[e(p,{span:12},{default:l(()=>[e(o,{label:"项目名",prop:"projectName"},{default:l(()=>[e(r,{modelValue:a.projectName,"onUpdate:modelValue":t[0]||(t[0]=n=>a.projectName=n),placeholder:"项目名",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(o,{label:"项目路径",prop:"projectPath"},{default:l(()=>[e(r,{modelValue:a.projectPath,"onUpdate:modelValue":t[1]||(t[1]=n=>a.projectPath=n),placeholder:"项目路径",disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:l(()=>[e(p,{span:12},{default:l(()=>[e(o,{label:"项目标识",prop:"projectCode"},{default:l(()=>[e(r,{modelValue:a.projectCode,"onUpdate:modelValue":t[2]||(t[2]=n=>a.projectCode=n),placeholder:"项目标识",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(o,{label:"项目包名",prop:"projectPackage"},{default:l(()=>[e(r,{modelValue:a.projectPackage,"onUpdate:modelValue":t[3]||(t[3]=n=>a.projectPackage=n),placeholder:"项目包名",disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,null,{default:l(()=>[g(" 变更后的信息 ")]),_:1}),e(o,{label:"项目名",prop:"modifyProjectName"},{default:l(()=>[e(r,{modelValue:a.modifyProjectName,"onUpdate:modelValue":t[4]||(t[4]=n=>a.modifyProjectName=n),placeholder:"项目名"},null,8,["modelValue"])]),_:1}),e(m,null,{default:l(()=>[e(p,{span:12},{default:l(()=>[e(o,{label:"项目标识",prop:"modifyProjectCode"},{default:l(()=>[e(r,{modelValue:a.modifyProjectCode,"onUpdate:modelValue":t[5]||(t[5]=n=>a.modifyProjectCode=n),placeholder:"项目标识"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(o,{label:"项目包名",prop:"modifyProjectPackage"},{default:l(()=>[e(r,{modelValue:a.modifyProjectPackage,"onUpdate:modelValue":t[6]||(t[6]=n=>a.modifyProjectPackage=n),placeholder:"项目包名"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:l(()=>[e(p,{span:12},{default:l(()=>[e(o,{label:"排除文件",prop:"exclusions"},{default:l(()=>[e(r,{modelValue:a.exclusions,"onUpdate:modelValue":t[7]||(t[7]=n=>a.exclusions=n),placeholder:"排除文件"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(o,{label:"变更文件",prop:"modifySuffix"},{default:l(()=>[e(r,{modelValue:a.modifySuffix,"onUpdate:modelValue":t[8]||(t[8]=n=>a.modifySuffix=n),placeholder:"变更文件"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}}),I=q({__name:"index",setup(_){const s=R({dataListUrl:"/gen/project/page",deleteUrl:"/gen/project",queryForm:{projectName:""}}),j=P(),v=r=>{j.value.init(r)},a=P(),y=r=>{a.value.init(r)},{getDataList:u,selectionChangeHandle:x,sizeChangeHandle:k,currentChangeHandle:f,deleteBatchHandle:t}=B(s);return(r,o)=>{const p=d("el-input"),m=d("el-form-item"),b=d("el-button"),w=d("el-form"),c=d("el-table-column"),i=d("el-table"),n=d("el-pagination"),L=d("el-card"),D=O("loading");return U(),N(L,null,{default:l(()=>[e(w,{inline:!0,model:s.queryForm,onKeyup:o[4]||(o[4]=S(V=>C(u)(),["enter"]))},{default:l(()=>[e(m,null,{default:l(()=>[e(p,{modelValue:s.queryForm.projectName,"onUpdate:modelValue":o[0]||(o[0]=V=>s.queryForm.projectName=V),placeholder:"项目名"},null,8,["modelValue"])]),_:1}),e(m,null,{default:l(()=>[e(b,{onClick:o[1]||(o[1]=V=>C(u)())},{default:l(()=>[g("查询")]),_:1})]),_:1}),e(m,null,{default:l(()=>[e(b,{type:"primary",onClick:o[2]||(o[2]=V=>v())},{default:l(()=>[g("新增")]),_:1})]),_:1}),e(m,null,{default:l(()=>[e(b,{type:"danger",onClick:o[3]||(o[3]=V=>C(t)())},{default:l(()=>[g("删除")]),_:1})]),_:1})]),_:1},8,["model"]),A((U(),N(i,{data:s.dataList,border:"",style:{width:"100%"},onSelectionChange:C(x)},{default:l(()=>[e(c,{type:"selection","header-align":"center",align:"center",width:"50"}),e(c,{prop:"projectName",label:"项目名","header-align":"center",align:"center"}),e(c,{prop:"projectCode",label:"项目标识","header-align":"center",align:"center"}),e(c,{prop:"projectPackage",label:"项目包名","show-overflow-tooltip":"","header-align":"center",align:"center"}),e(c,{prop:"projectPath",label:"项目路径","show-overflow-tooltip":"","header-align":"center",align:"center"}),e(c,{label:"操作",fixed:"right","header-align":"center",align:"center",width:"180"},{default:l(V=>[e(b,{type:"primary",link:"",onClick:h=>v(V.row.id)},{default:l(()=>[g("修改")]),_:2},1032,["onClick"]),e(b,{type:"primary",link:"",onClick:h=>y(V.row.id)},{default:l(()=>[g("源码下载")]),_:2},1032,["onClick"]),e(b,{type:"primary",link:"",onClick:h=>C(t)(V.row.id)},{default:l(()=>[g("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[D,s.dataListLoading]]),e(n,{"current-page":s.page,"page-sizes":s.pageSizes,"page-size":s.limit,total:s.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:C(k),onCurrentChange:C(f)},null,8,["current-page","page-sizes","page-size","total","onSizeChange","onCurrentChange"]),e(E,{ref_key:"addOrUpdateRef",ref:j,onRefreshDataList:C(u)},null,8,["onRefreshDataList"]),e(M,{ref_key:"downloadRef",ref:a},null,512)]),_:1})}}});export{I as default};
